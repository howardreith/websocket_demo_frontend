(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(54),c=n.n(s),u=(n(65),n(13)),i=n(14),o=n(16),l=n(15),m=n(59),h=n(1),p=n(4),f=n(12),b=r.a.createContext(null,null);var d=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a,r;return Object(u.a)(this,n),(a=t.call(this,e)).state=(r=Object(p.a)(a),{token:null,username:null,setToken:function(e,t){r.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{token:e})}),t)},setUsername:function(e,t){r.setState((function(t){return Object(f.a)(Object(f.a)({},t),{},{username:e})}),t)}}),a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.children;return r.a.createElement(b.Provider,{value:this.state},e)}}]),n}(a.Component),g=n(3),v=n.n(g),j=n(11);function y(e){return function(t){return r.a.createElement(b.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{appContext:n}))}))}}var O=n(5),x=n.n(O),E=(x.a.shape({push:x.a.func}),x.a.shape({token:x.a.string,username:x.a.string,setToken:x.a.func,setUsername:x.a.func}),"http://localhost:8080");function k(e){return w.apply(this,arguments)}function w(){return(w=Object(j.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/signin"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t})});case 2:return n=e.sent,e.abrupt("return",n.json().messages);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/last50messages"),{method:"get"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U,T,A,D,M,B,K,F,R,H,I=n(8),J=n(9),z=J.a.div(U||(U=Object(I.a)(["\n  margin: auto;\n  text-align: center;\n  width: 60%;\n"]))),P=J.a.h1(T||(T=Object(I.a)(['\n  font-family: "Arvo", serif;\n  font-size: 40px;\n']))),L=J.a.div(A||(A=Object(I.a)(["\n  margin: 10px auto;\n  text-align: center;\n"]))),N=J.a.input(D||(D=Object(I.a)(["\n  height: 30px;\n  width: 80%;\n  display: block;\n  margin: auto;\n  text-align: center;\n  font-size: 20px;\n"]))),V=J.a.button(M||(M=Object(I.a)(['\n  transition-duration: 0.4s;\n  background-color: white;\n  color: black;\n  border-color: gray;\n  height: 25px;\n  cursor: pointer;\n  margin: 2px;\n  font-family: "Lato", serif;\n']))),q=y(function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleSubmitAsync=a.handleSubmitAsync.bind(Object(p.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(p.a)(a)),a.state={username:null},a}return Object(i.a)(n,[{key:"handleUsernameChange",value:function(e){var t=e.target.value;this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{username:t})}))}},{key:"handleSubmitAsync",value:function(){var e=Object(j.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.username,t.preventDefault(),(0,this.props.onHandleSubmitUsername)(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,null,r.a.createElement(P,null,"Choose a Username"),r.a.createElement("form",{onSubmit:this.handleSubmitAsync},r.a.createElement(L,null,r.a.createElement(N,{type:"text",name:"username",id:"usernameInput",onChange:this.handleUsernameChange,placeholder:"Username"})),r.a.createElement(V,{type:"submit",value:"submit",id:"usernameSubmitButton"},"Submit"))))}}]),n}(a.Component)),G=n(58),Q=Object(G.io)("http://localhost:8080"),W=J.a.div(B||(B=Object(I.a)(["\n  margin: 3px;\n  width: 99%;\n  border: 1px solid black;\n  max-height: 85vh;\n  overflow: scroll;\n"]))),X=J.a.textarea(K||(K=Object(I.a)(["\n  margin: 3px;\n  width: 100%;\n  display: flex;\n  height: 30px;\n"]))),Y=J.a.input(F||(F=Object(I.a)(["\n  width: 70px;\n  height: 35px;\n  margin: 3px;\n"]))),Z=J.a.form(R||(R=Object(I.a)(["\n  display: flex;\n"]))),$=J.a.div(H||(H=Object(I.a)(["\n  height: 60px;\n  text-align: center;\n"]))),_=y(function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleMessageTextChange=a.handleMessageTextChange.bind(Object(p.a)(a)),a.handleSubmitAsync=a.handleSubmitAsync.bind(Object(p.a)(a)),a.onKeyDown=a.onKeyDown.bind(Object(p.a)(a)),a.state={messageText:"",messages:[]},a.messagesEndRef=r.a.createRef(),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(j.a)(v.a.mark((function e(){var t,n=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,this.setState({messages:t.messages.reverse()}),Q.on("receiveMessage",(function(e){var t=e.username,a=e.message,r=n.state.messages;r.push({messageSender:t,message:a}),n.setState({messages:r})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"handleMessageTextChange",value:function(e){var t=e.target.value;this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{messageText:t})}))}},{key:"handleSubmitAsync",value:function(){var e=Object(j.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=this.state.messageText,a=this.props.appContext,r={username:a.username,message:n},Q.emit("message",r),this.setState({messageText:""});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onKeyDown",value:function(){var e=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=5;break}return t.preventDefault(),t.stopPropagation(),e.next=5,this.handleSubmitAsync(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"scrollToBottom",value:function(){this.messagesEndRef.current.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.messageText,n=e.messages;return r.a.createElement("div",null,r.a.createElement($,null,r.a.createElement("h1",null,"Howie Chat")),r.a.createElement(W,null,n.map((function(e,t){return r.a.createElement("div",{key:"".concat(t,"wrapper").concat(e.message.replace(/\s/,""))},r.a.createElement("span",{key:"".concat(t,"sender").concat(e.message.replace(/\s/,""))},"".concat(e.messageSender,": ")),r.a.createElement("span",{key:"".concat(t,"message").concat(e.message.replace(/\s/,""))},e.message))})),r.a.createElement("div",{ref:this.messagesEndRef})),r.a.createElement(Z,{onSubmit:this.handleSubmitAsync},r.a.createElement(X,{onKeyDown:this.onKeyDown,value:t,onChange:this.handleMessageTextChange}),r.a.createElement(Y,{type:"submit",value:"send",id:"sendMessageButton"})))}}]),n}(a.Component)),ee=y(function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleSubmitUsername=a.handleSubmitUsername.bind(Object(p.a)(a)),a}return Object(i.a)(n,[{key:"handleSubmitUsername",value:function(){var e=Object(j.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.appContext,e.next=3,k(t);case 3:n.setUsername(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.appContext;return r.a.createElement(r.a.Fragment,null,!e.username&&r.a.createElement(q,{onHandleSubmitUsername:this.handleSubmitUsername}),e.username&&r.a.createElement(_,null))}}]),n}(a.Component));var te=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(d,null,r.a.createElement(b.Consumer,null,(function(e){return e?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(ee,e)}}))):r.a.createElement(r.a.Fragment,null)})))}}]),n}(a.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root"))},60:function(e,t,n){e.exports=n(100)},65:function(e,t,n){}},[[60,1,2]]]);
//# sourceMappingURL=main.a6c5cc8b.chunk.js.map